sudo: false

language: node_js

node_js:
  - 4

addons:
  firefox:
    "latest"

before_install:
  # Make sure we have new NPM.
  - npm install -g npm
  - npm config set loglevel warn

before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - npm install -g grunt-cli
  - npm install -g protractor@4.0.3
  # http://julianveling.com/?p=347
  - webdriver-manager update
  - webdriver-manager start 2>&1 &
  - sleep 3
  - grunt serve:prod 2>&1 &
  # wait for prod compile and serve to finish...
  - sleep 60

