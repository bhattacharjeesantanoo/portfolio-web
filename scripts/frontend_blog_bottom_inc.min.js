(function(){!function(a,b,c){var d,e;if(a.OffcanvasNav=function(d){var e,f,g,h,i;return h={debug:!1,coverSelector:".flyout-cover",slideTargetSelector:".offcanvas-slide",toggleBtnSelector:".navbar-toggle",offcanvasNavSelector:"header.flyout",coverActiveClass:"active",widthBreakPoint:768,xMax:150,xMin:0,xMoveThresholdForClick:10,animationDuration:400,closeWhenInnerLinksClicked:!0},h=c.extend(h,d),i=new Date,e=function(a){var b,c;if(b=new Date,c=b-i,h.debug)return"undefined"!=typeof console&&null!==console?console.log("[offcanvas "+c+"] "+a):void 0},g={touchStartX:0,isTouchDown:!1,xCur:0,$cover:null,$toggleBtn:null,$slideTargets:null,isOpen:!1,hasDragged:!1,xCoverDragStart:0,offcanvasDelay_id:0,EVENT_OFFCANVASNAV_CLOSE:"offcanvasnav-close",EVENT_OFFCANVASNAV_TRANSITION_CLOSE_COMPLETE:"offcanvasnav-transition-close-complete",EVENT_OFFCANVASNAV_TRANSITION_OPEN_COMPLETE:"offcanvasnav-transition-open-complete",CLASS_OFFCANVAS_READY:"offcanvasnav-ready",init:function(){var a;return a=this,a.startup()},startup:function(){var a;return a=this,a.$cover=c(h.coverSelector),a.$slideTargets=c(h.slideTargetSelector),a.$offcanvasNav=c(h.offcanvasNavSelector),a.$toggleBtn=c(h.toggleBtnSelector),a.$toggleBtn.data("offcanvas_isToggleBtn",!0),a.handleWindowResize(),a.offcanvasActivate(!1),a.bindToggleBtn(!0),h.closeWhenInnerLinksClicked&&a.bindInnerLinkEvents(!0),c("html").addClass(a.CLASS_OFFCANVAS_READY)},close:function(){var a;if(a=this,e("close isOpen? _.isOpen:"+a.isOpen),a.isOpen)return a.coverOpenToggle(!1),a.coverActivate(!1)},open:function(){var a;if(a=this,e("open isOpen? _.isOpen:"+a.isOpen),!a.isOpen)return a.coverOpenToggle(!0),a.coverActivate(!0)},getIsOpen:function(){return this.isOpen},destroy:function(){var a,b;return a=this,a.close(),a.bindToggleBtn(!1),c("html").removeClass(a.CLASS_OFFCANVAS_READY),g=null,b=null},bindToggleBtn:function(a){var b;if(b=this,b.$toggleBtn.unbind("click",c.proxy(b.handleToggleBtnClick,b)),a)return b.$toggleBtn.bind("click",c.proxy(b.handleToggleBtnClick,b))},handleToggleBtnClick:function(a){var b;return b=this,e("handleToggleBtnClick "+b.isOpen),b.toggleOffCanvasNav(!b.isOpen)},toggleOffCanvasNav:function(a){var b;return b=this,b.isOpen&&!a?b.close():!b.isOpen&&a?b.open():void 0},offcanvasActivate:function(a){var b;return b=this,a?b.$offcanvasNav.css({visibility:"visible"}):b.$offcanvasNav.css({visibility:"hidden"}),b.bindToggleBtn(!a)},coverActivate:function(a){var b;return b=this,b.hasDragged=!1,a?(b.bindGeneralEvents(!0),b.bindEvents(b.$cover,!0),b.handleWindowResize(),b.$cover.addClass(h.coverActiveClass)):(b.bindEvents(b.$cover,!1),b.bindGeneralEvents(!1),b.$cover.removeClass(h.coverActiveClass))},coverOpenToggle:function(a,b,c){var d,f;return null==b&&(b=-1),null==c&&(c=0),e("coverOpenToggle "+a),d=this,f=a?h.xMax:h.xMin,b===-1&&(b=h.animationDuration),d.isOpen=a,a?(d.xCur=d.xCoverDragStart=h.xMax,d.offcanvasActivate(!0)):(d.xCur=d.xCoverDragStart=h.xMin,clearTimeout(d.offcanvasDelay_id),d.offcanvasDelay_id=setTimeout(function(){return d.offcanvasActivate(!1)},c+b+50),d.coverActivate(!1)),d.targetsTransition(f,b,c)},coverDeltaX:function(a){var b,c;return b=this,c=h.xMax+a,c<h.xMin?c=h.xMin:c>h.xMax&&(c=h.xMax),c},coverPlaceDeltaX:function(a){var b,c,d,e,f;return b=this,c=!1,d=b.xCoverDragStart+a,d<h.xMin?d=h.xMin:d>h.xMax&&(d=h.xMax),f="translate("+d+"px, 0)",c=b.xCur!==d,b.xCur=d,b.targetsTransition(d),e=d/(h.xMax-h.xMin),c},targetsTransition:function(a,b,d){var f,g,h,i,j,k;if(f=this,i=j=h="",void 0!==a){if(h="translate("+a+"px, 0)",void 0!==b&&(i="transform "+b+"ms ease",void 0!==d&&d>0&&(j=d+"ms")),e("targetsTrans x:"+a+" time:"+b+"delay:"+d+" transform:"+h+" transitionDelay:"+j+" transition:"+i),!Modernizr.cssanimations)return g={left:targetX+"px"},f.$slideTargets.css(g),f.handleTargetsTransitionEnd();if(d>0&&0===b&&(b=1),k="transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",f.$slideTargets.eq(0).unbind(k,c.proxy(f.handleTargetsTransitionEnd,f)).bind(k,c.proxy(f.handleTargetsTransitionEnd,f)),f.$slideTargets.css({"-webkit-transform":h,"-ie-transform":h,transform:h,"-webkit-transition":"-webkit-"+i,"-ie-transition":"-webkit-"+i,transition:i,"-ie-transition-delay":j,"-webkit-transition-delay":j,"transition-delay":j}),0===b&&0===d)return f.handleTargetsTransitionEnd()}},handleTargetsTransitionEnd:function(a){var b;return b=this,e("handleTargetsTransitionEnd isOpen:"+b.isOpen+" _.xCur:"+b.xCur),b.isOpen&&b.xCur===h.xMax?(e('"handleTargetsTransitionEnd EVENT_OFFCANVASNAV_TRANSITION_OPEN_COMPLETE'),c(b).trigger(b.EVENT_OFFCANVASNAV_TRANSITION_OPEN_COMPLETE)):b.isOpen||b.xCur!==h.xMin?void 0:(e('"handleTargetsTransitionEnd EVENT_OFFCANVASNAV_TRANSITION_CLOSE_COMPLETE'),c(b).trigger(b.EVENT_OFFCANVASNAV_TRANSITION_CLOSE_COMPLETE))},bindGeneralEvents:function(d){var e;if(e=this,c(a).unbind("resize",c.proxy(e.handleWindowResize,e)).unbind("orientationchange",c.proxy(e.handleOrientationChange,e)).unbind("touchmove mousemove",c.proxy(e.handleCoverTouchMove,e)).unbind("touchend mouseup",c.proxy(e.handleCoverTouchUp,e)),c(b).unbind("touchmove",c.proxy(e.handleEventPrevent,e)),d)return c(a).bind("resize",c.proxy(e.handleWindowResize,e)).bind("orientationchange",c.proxy(e.handleOrientationChange,e)).bind("touchmove mousemove",c.proxy(e.handleCoverTouchMove,e)).bind("touchend mouseup",c.proxy(e.handleCoverTouchUp,e)),c(b).bind("touchmove",c.proxy(e.handleEventPrevent,e))},bindEvents:function(a,b){var d;if(d=this,a.unbind("touchstart mousedown",c.proxy(d.handleCoverTouchDown,d)).unbind("touchmove mousemove",c.proxy(d.handleCoverTouchMove,d)).unbind("touchend mouseup",c.proxy(d.handleCoverTouchUp,d)).unbind("click",c.proxy(d.handleCoverTouchUp,d)),b)return a.bind("touchstart mousedown",c.proxy(d.handleCoverTouchDown,d)).bind("touchcancel",c.proxy(d.handleCoverTouchCancel,d)).bind("touchend mouseup",c.proxy(d.handleCoverTouchUp,d)).bind("click",c.proxy(d.handleCoverTouchUp,d))},bindInnerLinkEvents:function(a){var b,d;if(d=this,b=d.$offcanvasNav.find("a"),b.unbind("click tap",c.proxy(d.handleInnerLinkClick,d)),a)return b.bind("click tap",c.proxy(d.handleInnerLinkClick,d))},handleCoverClick:function(a){return a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),e("click")},handleCoverTouchDown:function(a){var b;return b=this,a.preventDefault(),b.hasDragged=!1,b.isTouchDown=!0,b.touchStartX=b.getTouchX(a),b.touchLastX=b.touchStartX,b.isOpen||(b.coverActivate(!0),b.handleCoverTouchMove(a)),e("touch start "+b.touchStartX+" toggleBtn? "+c(a.target).data("offcanvas_isToggleBtn"))},handleCoverTouchMove:function(a){var b,c,d,e;if(b=this,a.preventDefault(),b.isTouchDown)return e=b.getTouchX(a),b.touchLastX=e,c=e-b.touchStartX,d=c,b.hasDragged=b.coverPlaceDeltaX(c)},handleCoverTouchUp:function(a){var b,c,d,f,g;if(b=this,e("!!cover touch end _.isTouchDown:"+b.isTouchDown+" _.xCoverDragStart:"+b.xCoverDragStart+" isOpen:"+b.isOpen+" hasDragged:"+b.hasDragged+" xcur:"+b.xCur+" e.type:"+a.type),"click"===a.type&&(b.isTouchDown=!0,b.touchStartX=b.touchLastX=b.getTouchX(a)),b.isTouchDown){if(b.isTouchDown=!1,g=b.touchLastX,f=Math.abs(g-b.touchStartX),e("touchDeltaX:"+f+" _touchStartX:"+b.touchStartX+" touchX:"+g),!(b.xCur>=h.xMax))return d=.75*(h.xMax+h.xMin),c=b.xCur<=d,e("midX:"+d+" xCur:"+b.xCur+"touchDeltaX:"+f+" xMax"+h.xMax+" bolDoOpen: bolDoClose:"+c+" isOpen:"+b.isOpen+" _.xCoverDragStart:"+b.xCoverDragStart),c?(e("handleCoverTouchUp going for closed"),b.coverOpenToggle(!1)):(e("handleCoverTouchUpgoing for open"),b.coverOpenToggle(!0));if(f<h.xMoveThresholdForClick||isNaN(f))return e("handleCoverTouchUp going for closed from full open"),b.coverOpenToggle(!1)}},handleCoverTouchCancel:function(){var a;return a=this,e("handleCoverTouchCancel"),a.isTouchDown=!1},handleEventPrevent:function(a){return a.preventDefault()},handleOrientationChange:function(a){var b;return b=this,b.close()},handleWindowResize:function(){var a,d;if(d=this,a=c(b),d.$cover.width(a.width()).height(a.height()),c("header.flyout .nav").height(a.height()+100),e("handleWindowResize _.isOpen:"+d.isOpen+" doc.width:"+a.width()+" breakpoint:"+h.widthBreakPoint),d.isOpen&&a.width()>=h.widthBreakPoint)return e("handleWindowResize gong for closed"),d.coverOpenToggle(!1)},setWidthBreakPoint:function(a){var b;return b=this,h.widthBreakPoint=a,b.handleWindowResize()},getWidthBreakPoint:function(){return h.widthBreakPoint},bindAPIEvent:function(a,b){var d;return d=this,c(d).bind(a,b)},unbindAPIEvent:function(a,b){var d;return d=this,c(d).unbind(a,b)},handleInnerLinkClick:function(a){var b;return b=this,b.close()},getTouchX:function(a){var b,c,d;if(b=a,a.originalEvent&&(b=a.originalEvent),d=b.pageX,Modernizr.touch)try{d=b.touches[0].pageX}catch(a){c=a,d=b.pageX}return d}},g.init(),f={settings:g.settings,open:c.proxy(g.open,g),close:c.proxy(g.close,g),destroy:c.proxy(g.destroy,g),getIsOpen:c.proxy(g.getIsOpen,g),setWidthBreakPoint:c.proxy(g.setWidthBreakPoint,g),getWidthBreakPoint:c.proxy(g.getWidthBreakPoint,g),bind:c.proxy(g.bindAPIEvent,g),unbind:c.proxy(g.unbindAPIEvent,g),EVENT_OFFCANVASNAV_TRANSITION_CLOSE_COMPLETE:g.EVENT_OFFCANVASNAV_TRANSITION_CLOSE_COMPLETE,EVENT_OFFCANVASNAV_TRANSITION_OPEN_COMPLETE:g.EVENT_OFFCANVASNAV_TRANSITION_OPEN_COMPLETE}},d=c("html body"),void 0!==d.attr("data-offcanvas-nav"))return e={},void 0!==d.attr("data-offcanvas-nav-xMax")&&(e.xMax=parseInt(d.attr("data-offcanvas-nav-xMax"),10)),a.offcanvasNav=new a.OffcanvasNav(e)}(window,document,$)}).call(this),function(){window.blog={initViewCount:function(){var a,b,c,d,e,f;return f="view-"+window.appData.page_id,e=window.location.hostname,a=!1,c=!1,b=!1,store.enabled||(b=!0),b||store.get("omit_myself")===!0||null!==storeWithExpiration.get(f)||e.indexOf(window.appData.devHostname)===-1&&e.indexOf(window.appData.productionHostname)>-1&&(b=!0),a&&(b=!0),d=new Firebase(window.appData.firebaseBlogDomain+window.appData.page_id),d.once("value",function(a){var c;if(c=0,a.val()&&(c=a.val().views),(b||0===c)&&(c+=1),$(".detail-views .count").html(c),b||0===c)return d.set({views:c}),storeWithExpiration.set(f,"active",6e4)})},init:function(){return $(document).ready(function(a){return function(){return"index"!==window.appData.page_id&&a.initViewCount(),$("article").linkExternal(),$("img[usemap]").rwdImageMaps()}}(this))}},window.storeWithExpiration={set:function(a,b,c){return store.set(a,{val:b,exp:c,time:(new Date).getTime()})},get:function(a){var b;return b=store.get(a),b?(new Date).getTime()-b.time>b.exp?null:b.val:null}},window.storeOmitMyself=function(a){return store.set("omit_myself",a),store.get("omit_myself")},window.blog.init()}.call(this);